{"ast":null,"code":"var _a, _b, _c;\nimport { __decorate, __metadata } from \"tslib\";\nimport { inject, Injectable } from '@angular/core';\nimport { MutationService, QueryClientService, QueryService } from '@ngneat/query';\nimport { tap } from 'rxjs';\nimport { EnvironmentService } from '../../environment/environment.service';\nimport { HttpClient } from '@angular/common/http';\nexport let DokumenteClient = class DokumenteClient {\n  constructor(http, mutator, querier,\n  // private readonly queryClient: QueryClient,\n  environment) {\n    this.http = http;\n    this.mutator = mutator;\n    this.querier = querier;\n    this.environment = environment;\n    this.key = 'dokumente';\n    this.endpoint = `${this.environment.configuration.apiUrl}/${this.environment.configuration.apiRoutes.dokumente}`;\n    this.queryClient = inject(QueryClientService);\n  }\n  read() {\n    return this.querier.use({\n      queryKey: [this.key],\n      queryFn: () => this.http.get(this.endpoint)\n    });\n  }\n  find(id) {\n    return this.querier.use({\n      queryKey: [this.key, id],\n      queryFn: () => this.http.get(`${this.endpoint}/${id}`)\n    });\n  }\n  create() {\n    return this.mutator.use(dto => this.http.post(this.endpoint, dto).pipe(tap(() => this.queryClient.invalidateQueries([this.key]))));\n  }\n  annehmen() {\n    return this.mutator.use(id => this.http.post(`${this.endpoint}/${id}/annehmen`, null).pipe(tap(() => this.queryClient.invalidateQueries([this.key]))));\n  }\n  ausstellen() {\n    return this.mutator.use(id => this.http.post(`${this.endpoint}/${id}/ausstellen`, null).pipe(tap(() => this.queryClient.invalidateQueries([this.key]))));\n  }\n};\nDokumenteClient = __decorate([Injectable({\n  providedIn: 'root'\n}), __metadata(\"design:paramtypes\", [typeof (_a = typeof HttpClient !== \"undefined\" && HttpClient) === \"function\" ? _a : Object, typeof (_b = typeof MutationService !== \"undefined\" && MutationService) === \"function\" ? _b : Object, typeof (_c = typeof QueryService !== \"undefined\" && QueryService) === \"function\" ? _c : Object, EnvironmentService])], DokumenteClient);","map":{"version":3,"names":["inject","Injectable","MutationService","QueryClientService","QueryService","tap","EnvironmentService","HttpClient","DokumenteClient","constructor","http","mutator","querier","environment","key","endpoint","configuration","apiUrl","apiRoutes","dokumente","queryClient","read","use","queryKey","queryFn","get","find","id","create","dto","post","pipe","invalidateQueries","annehmen","ausstellen","__decorate","providedIn","_a","Object","_b","_c"],"sources":["C:\\Users\\gregor.woiwode\\workbench\\talks\\talk-qwik-angular\\apps\\insurance-angular\\src\\app\\features\\dokumente\\dokumente.client.ts"],"sourcesContent":["import { inject, Injectable } from '@angular/core';\nimport {\n  MutationService,\n  QueryClientService,\n  QueryService,\n} from '@ngneat/query';\nimport { tap } from 'rxjs';\nimport { EnvironmentService } from '../../environment/environment.service';\nimport { DokumentenlisteEintragDto, ErzeugeNeuesAngebotDto } from './models';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({ providedIn: 'root' })\nexport class DokumenteClient {\n  private readonly key = 'dokumente';\n  private readonly endpoint = `${this.environment.configuration.apiUrl}/${this.environment.configuration.apiRoutes.dokumente}`;\n\n  private readonly queryClient = inject(QueryClientService);\n\n  constructor(\n    private readonly http: HttpClient,\n\n    private readonly mutator: MutationService,\n    private readonly querier: QueryService,\n    // private readonly queryClient: QueryClient,\n    private readonly environment: EnvironmentService\n  ) {}\n\n  read() {\n    return this.querier.use({\n      queryKey: [this.key],\n      queryFn: () => this.http.get<DokumentenlisteEintragDto[]>(this.endpoint),\n    });\n  }\n\n  find(id: string) {\n    return this.querier.use({\n      queryKey: [this.key, id],\n      queryFn: () =>\n        this.http.get<DokumentenlisteEintragDto>(`${this.endpoint}/${id}`),\n    });\n  }\n\n  create() {\n    return this.mutator.use((dto: ErzeugeNeuesAngebotDto) =>\n      this.http\n        .post<DokumentenlisteEintragDto>(this.endpoint, dto)\n        .pipe(tap(() => this.queryClient.invalidateQueries([this.key])))\n    );\n  }\n\n  annehmen() {\n    return this.mutator.use((id: string) =>\n      this.http\n        .post<void>(`${this.endpoint}/${id}/annehmen`, null)\n        .pipe(tap(() => this.queryClient.invalidateQueries([this.key])))\n    );\n  }\n\n  ausstellen() {\n    return this.mutator.use((id: string) =>\n      this.http\n        .post<void>(`${this.endpoint}/${id}/ausstellen`, null)\n        .pipe(tap(() => this.queryClient.invalidateQueries([this.key])))\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}