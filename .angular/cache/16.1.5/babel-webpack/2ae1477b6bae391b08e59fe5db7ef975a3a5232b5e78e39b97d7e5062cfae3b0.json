{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/gregor.woiwode/workbench/talks/talk-qwik-angular/node_modules/.pnpm/@babel+runtime@7.22.5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate, __metadata } from \"tslib\";\nimport { ChangeDetectionStrategy, Component, computed, signal } from '@angular/core';\nimport { DokumenteClient } from '../dokumente.client';\nimport { TableComponent } from '../../../components/table/table.component';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { RouterLink, RouterOutlet } from '@angular/router';\nimport { AsyncPipe, JsonPipe, NgIf } from '@angular/common';\nimport { SearchComponent } from '../../../components/search/search.component';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { MatInputModule } from '@angular/material/input';\nexport let DokumenteView = class DokumenteView {\n  constructor(dokumenteClient) {\n    this.dokumenteClient = dokumenteClient;\n    this.dokumenteSearchTerm = signal('');\n    this.dokumenteResult$ = this.dokumenteClient.read().result$;\n    this.dokumenteResult = toSignal(this.dokumenteResult$);\n    this.dokumenteFiltered = computed(() => {\n      const searchTerm = this.dokumenteSearchTerm();\n      const dokumente = this.dokumenteResult()?.data || [];\n      if (!searchTerm) return dokumente;\n      return dokumente.filter(dokument => dokument.berechnungsart.match(new RegExp(searchTerm, 'i')) || dokument.dokumenttyp.match(new RegExp(searchTerm, 'i')) || dokument.risiko.match(new RegExp(searchTerm, 'i')));\n    });\n    this.current = signal(null);\n  }\n  dokumentAnnehmen(dto) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.dokumenteClient.annehmen().mutate(dto.id);\n    })();\n  }\n  dokumentAusstellen(dto) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.dokumenteClient.ausstellen().mutate(dto.id);\n    })();\n  }\n  setCurrent($event) {\n    this.current.set($event);\n  }\n  setSearchTerm(searchTerm) {\n    this.dokumenteSearchTerm.set(searchTerm);\n  }\n};\nDokumenteView = __decorate([Component({\n  selector: 'app-dokumente',\n  standalone: true,\n  imports: [NgIf, JsonPipe, RouterLink, RouterOutlet, MatButtonModule, MatIconModule, MatTooltipModule, TableComponent, SearchComponent, AsyncPipe, MatInputModule],\n  templateUrl: './dokumente.view.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n}), __metadata(\"design:paramtypes\", [DokumenteClient])], DokumenteView);","map":{"version":3,"names":["ChangeDetectionStrategy","Component","computed","signal","DokumenteClient","TableComponent","MatButtonModule","MatIconModule","MatTooltipModule","RouterLink","RouterOutlet","AsyncPipe","JsonPipe","NgIf","SearchComponent","toSignal","MatInputModule","DokumenteView","constructor","dokumenteClient","dokumenteSearchTerm","dokumenteResult$","read","result$","dokumenteResult","dokumenteFiltered","searchTerm","dokumente","data","filter","dokument","berechnungsart","match","RegExp","dokumenttyp","risiko","current","dokumentAnnehmen","dto","_this","_asyncToGenerator","annehmen","mutate","id","dokumentAusstellen","_this2","ausstellen","setCurrent","$event","set","setSearchTerm","__decorate","selector","standalone","imports","templateUrl","changeDetection","OnPush"],"sources":["C:\\Users\\gregor.woiwode\\workbench\\talks\\talk-qwik-angular\\apps\\insurance-angular\\src\\app\\features\\dokumente\\dokumente\\dokumente.view.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  signal,\n} from '@angular/core';\nimport { DokumenteClient } from '../dokumente.client';\nimport { DokumentenlisteEintragDto } from '../models';\nimport { TableComponent } from '../../../components/table/table.component';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { RouterLink, RouterOutlet } from '@angular/router';\nimport { AsyncPipe, JsonPipe, NgIf } from '@angular/common';\nimport { SearchComponent } from '../../../components/search/search.component';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { MatInputModule } from '@angular/material/input';\n\n@Component({\n  selector: 'app-dokumente',\n  standalone: true,\n  imports: [\n    NgIf,\n    JsonPipe,\n    RouterLink,\n    RouterOutlet,\n    MatButtonModule,\n    MatIconModule,\n    MatTooltipModule,\n    TableComponent,\n    SearchComponent,\n    AsyncPipe,\n    MatInputModule,\n  ],\n  templateUrl: './dokumente.view.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DokumenteView {\n  protected readonly dokumenteSearchTerm = signal('');\n\n  private readonly dokumenteResult$ = this.dokumenteClient.read().result$;\n  protected readonly dokumenteResult = toSignal(this.dokumenteResult$);\n\n  protected readonly dokumenteFiltered = computed(() => {\n    const searchTerm = this.dokumenteSearchTerm();\n    const dokumente = this.dokumenteResult()?.data || [];\n\n    if (!searchTerm) return dokumente;\n\n    return dokumente.filter(\n      (dokument) =>\n        dokument.berechnungsart.match(new RegExp(searchTerm, 'i')) ||\n        dokument.dokumenttyp.match(new RegExp(searchTerm, 'i')) ||\n        dokument.risiko.match(new RegExp(searchTerm, 'i'))\n    );\n  });\n\n  protected readonly current = signal<DokumentenlisteEintragDto | null>(null);\n\n  constructor(private dokumenteClient: DokumenteClient) {}\n\n  async dokumentAnnehmen(dto: DokumentenlisteEintragDto) {\n    await this.dokumenteClient.annehmen().mutate(dto.id);\n  }\n\n  async dokumentAusstellen(dto: DokumentenlisteEintragDto) {\n    await this.dokumenteClient.ausstellen().mutate(dto.id);\n  }\n\n  setCurrent($event: DokumentenlisteEintragDto | null) {\n    this.current.set($event);\n  }\n\n  setSearchTerm(searchTerm: string) {\n    this.dokumenteSearchTerm.set(searchTerm);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}