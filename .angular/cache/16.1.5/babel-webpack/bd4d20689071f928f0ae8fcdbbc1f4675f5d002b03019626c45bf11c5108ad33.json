{"ast":null,"code":"var _a, _b, _c;\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component, DestroyRef, EventEmitter, Input, Output, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DialogModule } from '@angular/cdk/dialog';\nimport { Overlay, OverlayConfig } from '@angular/cdk/overlay';\nimport { CdkPortal } from '@angular/cdk/portal';\nimport { filter, merge, tap } from 'rxjs';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nexport let DialogComponent = class DialogComponent {\n  constructor(destroyRef, overlay) {\n    this.destroyRef = destroyRef;\n    this.overlay = overlay;\n    this.overlayConfig = new OverlayConfig({\n      hasBackdrop: true,\n      positionStrategy: this.overlay.position().global().centerHorizontally().centerVertically(),\n      scrollStrategy: this.overlay.scrollStrategies.block()\n    });\n    this.overlayRef = this.overlay.create(this.overlayConfig);\n    this.width = 'auto';\n    this.height = 'auto';\n    this.closed = new EventEmitter();\n  }\n  ngAfterViewInit() {\n    // Wait until the view is initialized to attach the portal to the overlay\n    this.overlayRef?.attach(this.portal);\n    const escapeKeyPressed = this.overlayRef.keydownEvents().pipe(filter(event => event.key.toLowerCase() === 'escape'), takeUntilDestroyed(this.destroyRef));\n    // telling the parent to destroy the dialog when the user\n    // clicks on the backdrop or press escape\n    merge(this.overlayRef.backdropClick(), escapeKeyPressed).pipe(tap(() => this.closed.emit()), takeUntilDestroyed(this.destroyRef)).subscribe();\n  }\n  ngOnDestroy() {\n    // parent destroys this component, this component destroys the overlayRef\n    this.overlayRef?.detach();\n    this.overlayRef?.dispose();\n  }\n};\n__decorate([Input(), __metadata(\"design:type\", Object)], DialogComponent.prototype, \"width\", void 0);\n__decorate([Input(), __metadata(\"design:type\", Object)], DialogComponent.prototype, \"height\", void 0);\n__decorate([Output(), __metadata(\"design:type\", Object)], DialogComponent.prototype, \"closed\", void 0);\n__decorate([ViewChild(CdkPortal), __metadata(\"design:type\", typeof (_c = typeof CdkPortal !== \"undefined\" && CdkPortal) === \"function\" ? _c : Object)], DialogComponent.prototype, \"portal\", void 0);\nDialogComponent = __decorate([Component({\n  selector: 'app-dialog',\n  standalone: true,\n  imports: [CommonModule, DialogModule, MatCardModule, MatIconModule, MatButtonModule],\n  templateUrl: './dialog.component.html',\n  styleUrls: ['./dialog.component.scss'],\n  encapsulation: ViewEncapsulation.None\n}), __metadata(\"design:paramtypes\", [typeof (_a = typeof DestroyRef !== \"undefined\" && DestroyRef) === \"function\" ? _a : Object, typeof (_b = typeof Overlay !== \"undefined\" && Overlay) === \"function\" ? _b : Object])], DialogComponent);","map":{"version":3,"names":["Component","DestroyRef","EventEmitter","Input","Output","ViewChild","ViewEncapsulation","CommonModule","DialogModule","Overlay","OverlayConfig","CdkPortal","filter","merge","tap","takeUntilDestroyed","MatCardModule","MatIconModule","MatButtonModule","DialogComponent","constructor","destroyRef","overlay","overlayConfig","hasBackdrop","positionStrategy","position","global","centerHorizontally","centerVertically","scrollStrategy","scrollStrategies","block","overlayRef","create","width","height","closed","ngAfterViewInit","attach","portal","escapeKeyPressed","keydownEvents","pipe","event","key","toLowerCase","backdropClick","emit","subscribe","ngOnDestroy","detach","dispose","__decorate","_c","Object","selector","standalone","imports","templateUrl","styleUrls","encapsulation","None","_a","_b"],"sources":["C:\\Users\\gregor.woiwode\\workbench\\talks\\talk-qwik-angular\\apps\\insurance-angular\\src\\app\\components\\dialog\\dialog.component.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  DestroyRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  Output,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DialogModule } from '@angular/cdk/dialog';\nimport { Overlay, OverlayConfig } from '@angular/cdk/overlay';\nimport { CdkPortal } from '@angular/cdk/portal';\nimport { filter, merge, tap } from 'rxjs';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\n\n@Component({\n  selector: 'app-dialog',\n  standalone: true,\n  imports: [CommonModule, DialogModule, MatCardModule, MatIconModule, MatButtonModule],\n  templateUrl: './dialog.component.html',\n  styleUrls: ['./dialog.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class DialogComponent implements AfterViewInit, OnDestroy {\n  private readonly overlayConfig = new OverlayConfig({\n    hasBackdrop: true,\n    positionStrategy: this.overlay.position().global().centerHorizontally().centerVertically(),\n    scrollStrategy: this.overlay.scrollStrategies.block()\n  });\n\n  private overlayRef = this.overlay.create(this.overlayConfig);\n\n  @Input() width = 'auto';\n  @Input() height = 'auto';\n\n  @Output() closed = new EventEmitter();\n\n  @ViewChild(CdkPortal) public readonly portal?: CdkPortal;\n\n  constructor(private readonly destroyRef: DestroyRef, private readonly overlay: Overlay) {}\n\n  ngAfterViewInit(): void {\n    // Wait until the view is initialized to attach the portal to the overlay\n    this.overlayRef?.attach(this.portal);\n\n    const escapeKeyPressed = this.overlayRef.keydownEvents().pipe(\n      filter(event => event.key.toLowerCase() === 'escape'),\n      takeUntilDestroyed(this.destroyRef)\n    );\n\n    // telling the parent to destroy the dialog when the user\n    // clicks on the backdrop or press escape\n    merge(this.overlayRef.backdropClick(), escapeKeyPressed)\n      .pipe(\n        tap(() => this.closed.emit()),\n        takeUntilDestroyed(this.destroyRef)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy(): void {\n    // parent destroys this component, this component destroys the overlayRef\n    this.overlayRef?.detach();\n    this.overlayRef?.dispose();\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}